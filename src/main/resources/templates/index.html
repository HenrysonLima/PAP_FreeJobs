<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="https://www.thymeleaf.org/extras/spring-security">

<head th:replace="~{fragments/head :: head('FreeJobs')}">

<body>
    <header th:replace="~{fragments/header-principal :: header-principal}"></header>

    <!-- importar ficheiros css -->
    <link th:href="@{/css/base.css}" rel="stylesheet">
    <link th:href="@{/css/cards.css}" rel="stylesheet">

    <!-- importar ficheiro js -->
    <script th:src="@{/js/script.js}" defer></script>

    <main class="main-content">
        <div class="container">

            <!-- hero title escolhido aleatoriamente por javascript -->
            <h2 class="hero-title" id="heroTitle">Conectando talentos a oportunidades</h2>

            <!-- exibir ultimos anuncios publicados -->
            <div class="flipping-grid" th:if="${!#lists.isEmpty(anunciosRecentes)}">
                <div class="flipping-card" th:each="a : ${anunciosRecentes}">
                    <div class="card-image icon-card">
                        <img th:if="${a.foto_anuncio != null}"
                            th:src="'data:image/jpeg;base64,' + ${a.fotoAnuncioBase64}" alt="Foto do anúncio"
                            class="ad-image">
                        <div class="laptop-icon" th:if="${a.foto_anuncio == null}">
                            <span class="dollar-sign">$</span>
                        </div>
                    </div>

                    <h3 class="card-title" th:text="${a.titulo}"></h3>
                    <p class="card-price" th:text="${a.preco + ' €'}"></p>
                    <p class="card-desc" th:text="${#strings.abbreviate(a.descricao, 100)}"></p>

                    <a th:href="@{'/anuncio/' + ${a.id}}" class="card-link">Ver detalhes</a>
                </div>
            </div>

            <!-- como funciona -->
            <section class="how-it-works">
                <h3 class="section-title">Como Funciona</h3>
                <div class="steps-grid">
                    <div class="step-card">
                        <div class="step-number">1</div>
                        <h4>Crie o seu perfil</h4>
                        <p>Registe-se gratuitamente e mostre-se para o mundo</p>
                    </div>
                    <div class="step-card">
                        <div class="step-number">2</div>
                        <h4>Publique ou procure</h4>
                        <p>Crie um anuncio ou encontre oportunidades</p>
                    </div>
                    <div class="step-card">
                        <div class="step-number">3</div>
                        <h4>Conecte-se</h4>
                        <p>Entre em contacto e comece a trabalhar</p>
                    </div>
                </div>
            </section>

            <section class="cta-section">
                <h3>Pronto para começar?</h3>
                <p>Junte-se a nós e comece a mostrar seus serviços para o mundo</p>
                <div class="cta-buttons">
                    <a th:href="@{/criarperfil}" class="cta-btn primary">Criar Perfil</a>
                    <a th:href="@{/anuncio/pesquisa}" class="cta-btn secondary">Explorar anúncios</a>
                </div>
            </section>
        </div>
    </main>




    <footer th:replace="~{fragments/footer :: footer}"></footer>

    <!-- Alertas com JS -->
    <script th:if="${param.loginsucesso}">alert("Bem vindo de volta");</script>
    <script th:if="${param.logoutsucesso}">alert("Logout efetuado com sucesso");</script>
    <script th:if="${contactoFeitoComSucesso}">alert("Sua mensagem foi enviada com sucesso, contactaremos assim que possível")</script>

</body>

</html>